# Workflow Tools 测试指南

## Gemini AI 配置测试

### 功能说明

新增的 Gemini 配置验证功能可以帮助您快速检查 `.env` 文件中的 Gemini AI 配置是否正确。

### 使用方法

```bash
# 进入 workflow-tools 目录
cd workflow-tools

# 运行 Gemini 配置测试
python tests/test_gemini_config.py
```

### 验证步骤

1. **API密钥存在性检查**: 验证 `GEMINI_API_KEY` 环境变量是否已设置
2. **API密钥格式验证**: 检查密钥是否符合 Google AI API 密钥的格式要求
3. **客户端初始化测试**: 尝试初始化 Gemini 客户端
4. **API连接测试**: 发送测试请求验证连接和权限
5. **模型可用性测试**: 验证指定的模型是否可用

### 测试输出示例

#### 成功情况:
```
============================================================
🔍 Gemini AI 配置验证报告
============================================================
✅ 总体状态: ✅ 配置正确

📋 详细检查结果:
  • API密钥存在: ✅
  • API密钥格式: ✅
  • 客户端初始化: ✅
  • API连接测试: ✅
  • 模型可用性: ✅

🎉 所有检查都通过了！Gemini AI配置正确。
============================================================
```

#### 失败情况:
```
============================================================
🔍 Gemini AI 配置验证报告
============================================================
❌ 总体状态: ❌ 配置有问题

📋 详细检查结果:
  • API密钥存在: ❌
  • API密钥格式: ❌
  • 客户端初始化: ❌
  • API连接测试: ❌
  • 模型可用性: ❌

❌ 错误信息:
  1. GEMINI_API_KEY环境变量未设置或为空

💡 修复建议:
  1. 检查.env文件中的GEMINI_API_KEY设置
  2. 确认API密钥是有效的Google AI API密钥
  3. 确保网络连接正常
  4. 确认google-generativeai已正确安装
============================================================
```

### 环境变量设置

在您的 `.env` 文件中设置以下变量：

```bash
# AI 服务配置
GEMINI_API_KEY=AIzaSyD...your_actual_key_here
```

### 注意事项

- 测试需要网络连接来验证 API 连接
- 如果遇到配额限制，连接测试可能会显示警告但仍认为配置正确
- 确保已安装 `google-generativeai` 依赖包
